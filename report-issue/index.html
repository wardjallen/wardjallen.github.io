<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.js" defer></script>
  <script src="servicenow.js" defer></script>
  <script src="webex.js" defer></script>
  <script src="genesys.js" defer></script>
  <script src="index.js" defer></script>
  <script src="alpine.js" defer></script>
  <script src="https://apps.usw2.pure.cloud/widgets/9.0/cxbus.min.js" onload="javascript:CXBus.configure({debug:false,pluginsPath:'https://apps.usw2.pure.cloud/widgets/9.0/plugins/'}); CXBus.loadPlugin('widgets-core');"></script>


  <script type="text/javascript">
		function getAdvancedConfig() {
			return {
				form: {
					autoSubmit: false,
					firstname: 'Praenomen',
					lastname: 'Gens',
					email: 'praenomen.gens@calidumlitterae.com',
					subject: 'Populated from data'
				},
				formJSON: {
					wrapper: '<table></table>',
					inputs: [
						// Default fields
						{
							id: 'cx_webchat_form_firstname',
							name: 'firstname',
							maxlength: '100',
							placeholder: 'Required',
							label: 'First Name'
						},
						{
							id: 'cx_webchat_form_lastname',
							name: 'lastname',
							maxlength: '100',
							placeholder: 'Required',
							label: 'Last Name'
						},
						{
							id: 'cx_webchat_form_email',
							name: 'email',
							maxlength: '100',
							placeholder: 'Optional',
							label: 'Email'
						},
						{
							id: 'cx_webchat_form_subject',
							name: 'subject',
							maxlength: '100',
							placeholder: 'Optional',
							label: 'Subject'
						},
						// Custom Fields
						{
							id: 'todoNumber',
							name: 'todoNumber',
							maxlength: '100',
							placeholder: 'Todo Number',
							label: 'Todo Number',
							value: 'Enter number'
						}
					]
				}
			};
		}
	</script>
  


  <title>Report Issue</title>
  <link rel="icon" href="./assets/test.png">
  <link href="style.css" rel="stylesheet">
</head>

<body x-data="dataModel" :class="theme || ''" x-cloak>
  <main>
    <div class="logo left"></div>
    <section x-show="step === 'start'">
      <h1>How was your experience?</h1>
      <div class="choices">
        <button class="choice" @click="answer(step, 'awesome')">üéâ Awesome!</button>
        <button class="choice" @click="answer(step, 'ok')">üòê OK</button>
        <button class="choice" @click="answer(step, 'notgood')">üò° Not good</button>
      </div>
    </section>
    <section
      x-show="step === 'whatwaswrong'"
      x-transition:leave="fadeup"
      x-transition:enter="fadein"
    >
      <div>
        <h1>What went wrong?</h1>
        <div class="choices">
          <button
            class="choice icon audio"
            @click="answer(step, 'audiovideo')"
          >Audio / video quality</button>
          <button
            class="choice icon room"
            @click="answer(step, 'room')"
          >Something in the room</button>
          <button
            class="choice icon other"
            @click="answer(step, 'other')"
          >Other</button>
          <button type="button" id="chat-button" onclick="customPlugin.command('WebChat.open', getAdvancedConfig());">Chat with Support</button>
        </div>
      </div>
    </section>
    <section
      x-show="step === 'moreinfo'"
      x-transition:enter="fadein"
      x-transition:leave="fadeup"
    >
      <div>
        <textarea x-model="answers.comments" placeholder="Describe the problem"></textarea>
      </div>
      <div>
        <input class="name" x-model="answers.name" placeholder="Your name here" />
      </div>
      <div>
        <button @click="back" x-show="step === 'moreinfo'">Back</button>
        <button
          @click="submit()"
          :class="busy ? 'busy' : ''"
          :disabled="busy"
          x-text="busy ? 'Send' : 'Send'"
          class="submit"
        ></button>
      </div>
    </section>
    <section
      x-show="step === 'done'"
      x-transition:leave="fadeup"
      x-transition:enter="fadein"
    >
      <div class="error" x-show="createIncident && !incidentNumber">Sorry! Something went wrong when creating a ServiceNow incident.</div>

      <div x-show="incidentNumber">
        <div class="done"></div>
        <h1>Issue reported</h1>
        <div x-show="createIncident">Thanks for your feedback.
          <p/>A ServiceNow incident has been created.
          <p/>Incident number: <b x-text="incidentNumber"></b>
        </div>
      </div>

      <h1 x-show="!createIncident">Thanks for your feedback!</h1>
    </section>
  </main>

  <div class="qr-dialog" x-show="showQr" @click="showQr = false">
    <div id="qr-code"></div>
    <div>Tap to close</div>
  </div>
  <footer>
    <img src="./assets/qrlogo.png" class="qr-logo"/>
    <a @click="showQr = true">Report with phone instead</a>
  </footer>
</body>

</html>
